<html>
<body>
<h1>Edit Game</h1>
<form method=POST action='/admin/game'>
<input type=hidden name="game" value="{{game.key().id()}}"></input>
<h3>Dedication vs <input type=text name="opposition" value="{{game.opposition}}"></input></h3>
<label for="dedication-score">Dedication score</label> <input type=text name="dedication-score" value="{{game.score}}"></input><br />
<label for="opposition-score">Opposition score</label> <input type=text name="opposition-score" value="{{game.opposition_score}}"></input><br />
<label for="completed">Game completed</label> <input type=checkbox name="completed" {% if game.played %}checked{% endif %}></input><br />
<label for="result">Result</label> <select name="result">
  <option value=win {% if game.result=='win' %}selected{% endif %}>Win</option>
  <option value=loss {% if game.result=='loss' %}selected{% endif %}>Loss</option>
  <option value=tie {% if game.result=='tie' %}selected{% endif %}>Tie</option>
</select><br />
<input type=submit value="Save Changes"></input>
<h2>Batting</h2>
<table>
<tr><th></th><th>Player</th><th>Batted?</th><th>Runs</th><th>Not Out?</th><th>Balls</th><th>Fours</th><th>Sixes</th><th>How Out</th></tr>
{% for i in range(1,12) %}
{% set b=batting_order[i-1] %}
{% set disp=b and b.batted %}
<tr>
  <td>{{i}}</td>
  <td><select name="batsman-{{i}}">
    <option value="0"></option>
    {% for p in players %}<option value={{p.key().id()}} {% if disp and b.player.key()==p.key()%}selected{% endif %}>{{p.first_name}} {{p.surname}}</option>
    {% endfor %}
  </select></td>
  <td><input type=checkbox name="batsman-{{i}}-batted"{% if disp %}checked{% endif %}></input></td>
  <td><input type=text name="batsman-{{i}}-runs" {% if disp %}value={{b.runs}}{% endif %}></input></td>
  <td><input type=checkbox name="batsman-{{i}}-not_out" {% if disp and b.not_out %}checked{% endif %}></input></td>
  <td><input type=text name="batsman-{{i}}-balls"{% if disp %}value={{b.balls_faced}}{% endif %}></input></td>
  <td><input type=text name="batsman-{{i}}-fours"{% if disp %}value={{b.fours_hit}}{% endif %}></input></td>
  <td><input type=text name="batsman-{{i}}-sixes"{% if disp %}value={{b.sixes_hit}}{% endif %}></input></td>
  <td><select name="batsman-{{i}}-how_out">
    <option value=""></option>
    {% for d in dismissal_types %}<option value={{d|replace(" ","-")}} {% if disp and b.how_out==d %}selected{% endif %}>{{d}}</option>{% endfor %}
  </select></td>
</tr>
{% endfor %}
</table>
<input type=submit value="Save Changes"></input>
<h2>Bowling</h2>
<table>
<tr><th></th><th>Player</th><th>Bowled?</th><th>Overs</th><th>Maidens</th><th>Runs</th><th>Wickets</th><th>Wides</th><th>No Balls</th><th>Fours</th><th>Sixes</th></tr>
{% for i in range(1,12) %}
{% set b=bowling_order[i-1] %}
{% set disp=(b and b.bowled) %}
<tr>
  <td>{{i}}</td>
  <td><select name="bowler-{{i}}">
    <option value="0"></option>
    {% for p in players %}<option value={{p.key().id()}} {% if disp and b.player.key()==p.key() %}selected{% endif %}>{{p.first_name}} {{p.surname}}</option>
    {% endfor %}
  </select></td>
  <td><input type=checkbox name="bowler-{{i}}-bowled" {% if disp %}checked{% endif %}></input></td>
  <td><input type=text name="bowler-{{i}}-overs" {% if disp %}value={{b.overs}}.{{b.balls}}{% endif %}></input></td>
  <td><input type=text name="bowler-{{i}}-maidens" {% if disp %}value={{b.maidens}}{% endif %}></input></td>
  <td><input type=text name="bowler-{{i}}-runs" {% if disp %}value={{b.runs_conceded}}{% endif %}></input></td>
  <td><input type=text name="bowler-{{i}}-wickets" {% if disp %}value={{b.wickets}}{% endif %}></input></td>
  <td><input type=text name="bowler-{{i}}-wides" {% if disp %}value={{b.wides}}{% endif %}></input></td>
  <td><input type=text name="bowler-{{i}}-no_balls" {% if disp %}value={{b.no_balls}}{% endif %}></input></td>
  <td><input type=text name="bowler-{{i}}-fours" {% if disp %}value={{b.fours}}{% endif %}></input></td>
  <td><input type=text name="bowler-{{i}}-sixes" {% if disp %}value={{b.sixes}}{% endif %}></input></td>
</tr>
{% endfor %}
</table>
<input type=submit value="Save Changes"></input>
<h2>Fielding</h2>
<table>
<tr><th>Player</th><th>Catches</th><th>Run Outs</th><th>Misfields</th><th>Dropped Catches (Normal)</th><th>Diving Drops</th><th>Other</th>
{% for i in range(1,13) %}
{% set f=fielders[i-1] %}
<tr>
  <td><select name="fielder-{{i}}">
    <option value="0"></option>
    {% for p in players %}<option value={{p.key().id()}} {% if f and f.player.key()==p.key() %}selected{% endif %}>{{p.first_name}} {{p.surname}}</option>
    {% endfor %}
  </select></td>
  <td><input type=text name="fielder-{{i}}-catches" {% if f %}value={{f.catches}}{% endif %}></input></td>
  <td><input type=text name="fielder-{{i}}-run_outs" {% if f %}value={{f.run_outs}}{% endif %}></input></td>
  <td><input type=text name="fielder-{{i}}-misfields" {% if f %}value={{f.misfields}}{% endif %}></input></td>
  <td><input type=text name="fielder-{{i}}-drops" {% if f %}value={{f.drops}}{% endif %}></input></td>
  <td><input type=text name="fielder-{{i}}-diving" {% if f %}value={{f.diving_drops}}{% endif %}></input></td>
  <td><input type=text name="fielder-{{i}}-non_attempts" {% if f %}value={{f.non_attempts}}{% endif %}></input></td>
  <td><input type=text name="fielder-{{i}}-other"{% if f %}value={{f.other}}{% endif %}></input></td>
</tr>
{% endfor %}
</table>
<input type=submit value="Save Changes"></input>
</form>
</body>
</html>
